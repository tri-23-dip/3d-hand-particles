<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Hand Particles ‚Ä¢ HYPER INTERACTIVE</title>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { overflow: hidden; background: #000; font-family: 'Inter', system-ui, sans-serif; }

#ui {
    position: absolute; top: 20px; left: 20px; z-index: 100;
    background: rgba(5, 15, 25, 0.8); backdrop-filter: blur(12px);
    padding: 24px 32px; border-radius: 60px;
    border: 1px solid rgba(0, 255, 255, 0.5);
    box-shadow: 0 0 50px rgba(0, 255, 255, 0.2);
    color: white; pointer-events: none;
    transition: all 0.3s ease;
}

#status { font-size: 0.9rem; letter-spacing: 2px; color: #8ff; }

#gesture-name {
    font-size: 2.5rem; font-weight: 800; margin-top: 5px;
    background: linear-gradient(45deg, #0ff, #f0f);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 0 20px cyan;
}

#mode-icons {
    display: flex; gap: 15px; margin: 15px 0 10px;
    font-size: 2rem; filter: drop-shadow(0 0 10px cyan);
}

.icon { opacity: 0.4; transition: all 0.2s; transform: scale(0.8); }
.icon.active { opacity: 1; transform: scale(1.2); text-shadow: 0 0 20px cyan; }

#start-btn {
    background: linear-gradient(135deg, #0ff, #80f);
    color: white; border: none; padding: 14px 32px;
    font-weight: bold; cursor: pointer; border-radius: 40px;
    font-size: 1.2rem; letter-spacing: 1px; transition: 0.2s;
    box-shadow: 0 0 30px cyan;
    pointer-events: auto; text-transform: uppercase;
}

#start-btn:hover {
    transform: scale(1.05); box-shadow: 0 0 60px cyan;
}

#stats {
    position: absolute; top: 20px; right: 20px; z-index: 100;
    background: rgba(0,0,0,0.6); backdrop-filter: blur(8px);
    padding: 15px 25px; border-radius: 40px;
    border: 1px solid #0ff; color: #0ff;
    font-family: monospace; font-size: 1.1rem;
    text-align: right;
}

.hint {
    position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
    background: rgba(0,0,0,0.5); backdrop-filter: blur(4px);
    color: white; padding: 12px 24px; border-radius: 40px;
    border: 1px solid #0ff; font-size: 0.9rem;
    z-index: 99;
}

video { display: none; }
canvas { display: block; }
</style>
</head>

<body>

<div id="ui">
<div id="status">‚ö° SYSTEM READY</div>
<div id="mode-icons">
<span class="icon active" id="icon-sphere">‚ö™</span>
<span class="icon" id="icon-heart">‚ù§Ô∏è</span>
<span class="icon" id="icon-star">‚≠ê</span>
<span class="icon" id="icon-torus">üåÄ</span>
<span class="icon" id="icon-wave">üåä</span>
</div>
<div id="gesture-name">SPHERE</div>
<button id="start-btn">üé• ACTIVATE CAMERA</button>
</div>

<div id="stats">
<div>üéØ MODE: <span id="stat-mode">SPHERE</span></div>
<div>‚úã HAND: <span id="stat-hand">WAITING</span></div>
<div>‚ö° FPS: <span id="fps">60</span></div>
<div>üîÆ PARTICLES: <span id="particle-count">15k</span></div>
</div>

<div class="hint">
üëÜ HAND GESTURES ACTIVE ‚Ä¢ KEYBOARD: 1-5 Switch Modes ‚Ä¢ SPACE = Rotate ‚Ä¢ R = Reset
</div>

<video id="video" autoplay playsinline></video>

<script type="importmap">
{ "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
</script>

<script type="module">
import * as THREE from 'three';
import { HandLandmarker, FilesetResolver } from "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.0";

const PARTICLE_COUNT = 15000;
const RESPONSE_SPEED = 0.25;
const HAND_SMOOTHING = 0.35;

let handLandmarker, video;
let currentMode = 'SPHERE';
let autoRotate = false;

const scene = new THREE.Scene();
scene.background = new THREE.Color(0x030614);

const camera = new THREE.PerspectiveCamera(70, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,1,14);

const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
document.body.appendChild(renderer.domElement);

const geometry = new THREE.BufferGeometry();
const positions = new Float32Array(PARTICLE_COUNT * 3);
const colors = new Float32Array(PARTICLE_COUNT * 3);

for(let i=0;i<PARTICLE_COUNT;i++){
    positions[i*3] = (Math.random()-0.5)*20;
    positions[i*3+1] = (Math.random()-0.5)*20;
    positions[i*3+2] = (Math.random()-0.5)*20;

    const color = new THREE.Color().setHSL(Math.random(),0.9,0.6);
    colors[i*3]=color.r;
    colors[i*3+1]=color.g;
    colors[i*3+2]=color.b;
}

geometry.setAttribute('position', new THREE.BufferAttribute(positions,3));
geometry.setAttribute('color', new THREE.BufferAttribute(colors,3));

const material = new THREE.PointsMaterial({
    size:0.07,
    vertexColors:true,
    blending:THREE.AdditiveBlending,
    depthWrite:false
});

const points = new THREE.Points(geometry,material);
scene.add(points);

function setMode(mode){
    currentMode=mode;
    document.getElementById('gesture-name').innerText=mode;
    document.getElementById('stat-mode').innerText=mode;

    document.querySelectorAll('.icon').forEach(i=>i.classList.remove('active'));
    document.getElementById(`icon-${mode.toLowerCase()}`).classList.add('active');
}

// KEYBOARD CONTROLS
window.addEventListener('keydown',(e)=>{
    switch(e.key){
        case '1': setMode('SPHERE'); break;
        case '2': setMode('HEART'); break;
        case '3': setMode('STAR'); break;
        case '4': setMode('TORUS'); break;
        case '5': setMode('WAVE'); break;
        case ' ':
            autoRotate=!autoRotate;
            break;
        case 'r':
        case 'R':
            points.position.set(0,0,0);
            break;
    }
});

function animate(){
    requestAnimationFrame(animate);

    if(autoRotate){
        points.rotation.y+=0.005;
    }

    renderer.render(scene,camera);
}

animate();

window.addEventListener('resize',()=>{
    camera.aspect=window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth,window.innerHeight);
});

document.getElementById('particle-count').innerText=(PARTICLE_COUNT/1000).toFixed(0)+'k';
</script>

</body>
</html>
